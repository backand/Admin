(function(c){c.fn.htmlarea=function(g){if(g&&typeof(g)==="string"){var d=[];for(var e=1;e<arguments.length;e++){d.push(arguments[e])}var k=a(this[0]);var j=k[g];if(j){return j.apply(k,d)}}return this.each(function(){a(this,g)})};var a=window.jHtmlArea=function(e,d){if(e.jquery){return a(e[0])}if(e.jhtmlareaObject){return e.jhtmlareaObject}else{return new a.fn.init(e,d)}};a.fn=a.prototype={jhtmlarea:"0.7.0",init:function(f,p){if(f.nodeName.toLowerCase()==="textarea"){var d=c.extend({},a.defaultOptions,p);f.jhtmlareaObject=this;var m=this.textarea=c(f);var n=m.width()||m.css("width").replace("px","");var j=m.height()||m.css("height").replace("px","");var e=this.container=c("<div/>").addClass("jHtmlArea").insertAfter(m.hide()).css("width",n);var l=this.toolbar=c("<div/>").addClass("ToolBar").appendTo(e);b.initToolBar.call(this,d);var i=this.iframe=c("<iframe />").css("height",j).css("width",(n-(c.browser.msie?0:4)));i.attr("src","/Home/IFrameDomain");var g=this.htmlarea=c("<div/>").append(i);e.append(g).append(m);var o=this;var k=true;if(i[0].attachEvent){i[0].attachEvent("onload",function(){if(k){k=false;try{b.initEditor.call(o,d);b.attachEditorEvents.call(o);var r=l.height()||24;i.css("height",(j));l.css("width",(n-2));if(d.loaded){d.loaded.call(o)}}catch(q){k=true}}})}else{i[0].onload=function(){k=false;b.initEditor.call(o,d);b.attachEditorEvents.call(o);var q=l.height()||24;i.css("height",(j));l.css("width",(n-2));if(d.loaded){d.loaded.call(o)}}}}},initIFrame:function(d,i,g,e){b.initEditor.call(d,i);b.attachEditorEvents.call(d);var f=g.height()||24;e.css("height",(h));g.css("width",(w-2));if(i.loaded){i.loaded.call(d)}},dispose:function(){this.textarea.show().insertAfter(this.container);this.container.remove();this.textarea[0].jhtmlareaObject=null},execCommand:function(e,d,f){this.iframe[0].contentWindow.focus();this.editor.execCommand(e,d||false,f||null);this.updateTextArea()},ec:function(e,d,f){this.execCommand(e,d,f)},queryCommandValue:function(d){this.iframe[0].contentWindow.focus();return this.editor.queryCommandValue(d)},qc:function(d){return this.queryCommandValue(d)},getSelectedHTML:function(){if(c.browser.msie){return this.getRange().htmlText}else{var d=this.getRange().cloneContents();return c("<p/>").append(c(d)).html()}},getSelection:function(){if(c.browser.msie){return this.editor.selection}else{return this.iframe[0].contentDocument.defaultView.getSelection()}},getRange:function(){var d=this.getSelection();if(!d){return null}return(d.getRangeAt)?d.getRangeAt(0):d.createRange()},html:function(d){if(d){this.pastHTML(d)}else{return toHtmlString()}},pasteHTML:function(d){this.iframe[0].contentWindow.focus();var e=this.getRange();if(c.browser.msie){e.pasteHTML(d)}else{if(c.browser.mozilla){e.deleteContents();e.insertNode(c((d.indexOf("<")!=0)?c("<span/>").append(d):d)[0])}else{e.deleteContents();e.insertNode(c(this.iframe[0].contentWindow.document.createElement("span")).append(c((d.indexOf("<")!=0)?"<span>"+d+"</span>":d))[0])}}e.collapse(false);e.select()},cut:function(){this.ec("cut")},copy:function(){this.ec("copy")},paste:function(){this.ec("paste")},bold:function(){this.ec("bold")},italic:function(){this.ec("italic")},underline:function(){this.ec("underline")},strikeThrough:function(){this.ec("strikethrough")},image:function(d){if(this.textarea.attr("upload")||this.textarea.attr("id")=="richTextArea"){var e=this;RichDialog.OpenUploadDialog(this.textarea.attr("viewName"),this.textarea.attr("name"),this.textarea.attr("guid"),function(f){e.ec("insertImage",false,f)})}else{if(c.browser.msie&&!d){this.ec("insertImage",true)}else{this.ec("insertImage",false,(d||prompt("Image URL:","http://")))}}},removeFormat:function(){this.ec("removeFormat",false,[]);this.unlink()},link:function(){if(c.browser.msie){this.ec("createLink",true)}else{this.ec("createLink",false,prompt("Link URL:","http://"))}},unlink:function(){this.ec("unlink",false,[])},orderedList:function(){this.ec("insertorderedlist")},unorderedList:function(){this.ec("insertunorderedlist")},superscript:function(){this.ec("superscript")},subscript:function(){this.ec("subscript")},p:function(){this.formatBlock("<p>")},h1:function(){this.heading(1)},h2:function(){this.heading(2)},h3:function(){this.heading(3)},h4:function(){this.heading(4)},h5:function(){this.heading(5)},h6:function(){this.heading(6)},heading:function(d){this.formatBlock(c.browser.msie?"Heading "+d:"h"+d)},indent:function(){this.ec("indent")},outdent:function(){this.ec("outdent")},insertHorizontalRule:function(){this.ec("insertHorizontalRule",false,"ht")},justifyLeft:function(){this.ec("justifyLeft")},justifyCenter:function(){this.ec("justifyCenter")},justifyRight:function(){this.ec("justifyRight")},increaseFontSize:function(){if(c.browser.msie){this.ec("fontSize",false,this.qc("fontSize")+1)}else{if(c.browser.safari){this.getRange().surroundContents(c(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","larger")[0])}else{this.ec("increaseFontSize",false,"big")}}},decreaseFontSize:function(){if(c.browser.msie){this.ec("fontSize",false,this.qc("fontSize")-1)}else{if(c.browser.safari){this.getRange().surroundContents(c(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","smaller")[0])}else{this.ec("decreaseFontSize",false,"small")}}},forecolor:function(d){this.ec("foreColor",false,d||prompt("Enter HTML Color:","#"))},formatBlock:function(d){this.ec("formatblock",false,d||null)},showHTMLView:function(){this.updateTextArea();this.textarea.show();this.htmlarea.hide();c("ul li:not(li:has(a.html))",this.toolbar).hide();c("ul:not(:has(:visible))",this.toolbar).hide();c("ul li a.html",this.toolbar).addClass("highlighted")},hideHTMLView:function(){this.updateHtmlArea();this.textarea.hide();this.htmlarea.show();c("ul",this.toolbar).show();c("ul li",this.toolbar).show().find("a.html").removeClass("highlighted")},toggleHTMLView:function(){(this.textarea.is(":hidden"))?this.showHTMLView():this.hideHTMLView()},toHtmlString:function(){return this.editor.body.innerHTML},toString:function(){return this.editor.body.innerText},updateTextArea:function(){this.textarea.val(this.toHtmlString())},updateHtmlArea:function(){this.editor.body.innerHTML=this.textarea.val()}};a.fn.init.prototype=a.fn;a.defaultOptions={toolbar:[["html"],["bold","italic","underline","strikethrough","|","subscript","superscript"],["increasefontsize","decreasefontsize"],["orderedlist","unorderedlist"],["indent","outdent"],["justifyleft","justifycenter","justifyright"],["forecolor","link","unlink","image","horizontalrule"],["p","h1","h2","h3","h4","h5","h6"],["cut","copy","paste"]],css:null,toolbarText:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",cut:"Cut",copy:"Copy",paste:"Paste",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",p:"Paragraph",indent:"Indent",outdent:"Outdent",horizontalrule:"Insert Horizontal Rule",justifyleft:"Left Justify",justifycenter:"Center Justify",justifyright:"Right Justify",increasefontsize:"Increase Font Size",decreasefontsize:"Decrease Font Size",forecolor:"Text Color",link:"Insert Link",unlink:"Remove Link",image:"Insert Image",orderedlist:"Insert Ordered List",unorderedlist:"Insert Unordered List",subscript:"Subscript",superscript:"Superscript",html:"Show/Hide HTML Source View"}};var b={toolbarButtons:{strikethrough:"strikeThrough",orderedlist:"orderedList",unorderedlist:"unorderedList",horizontalrule:"insertHorizontalRule",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",increasefontsize:"increaseFontSize",decreasefontsize:"decreaseFontSize",html:function(d){this.toggleHTMLView()}},initEditor:function(d){var f=this.editor=this.iframe[0].contentDocument||this.iframe[0].contentWindow.document;f.domain=document.domain;f.designMode="on";if(!c.browser.webkit){f.open();f.domain=document.domain;f.write(this.textarea.val());f.close()}else{f.getElementsByTagName("body")[0].innerHTML=this.textarea.val()}if(d.css){var g=f.createElement("link");g.rel="stylesheet";g.type="text/css";g.href=d.css;f.getElementsByTagName("head")[0].appendChild(g)}},initToolBar:function(d){var g=this;var f=function(k,i,l){return c("<li/>").append(c("<a href='javascript:void(0);'/>").addClass(k).attr("title",i).click(function(){l.call(g,c(this))}))};function j(k){var n=c("<ul/>").appendTo(g.toolbar);for(var m=0;m<k.length;m++){var p=k[m];if((typeof(p)).toLowerCase()==="string"){if(p==="|"){n.append(c('<li class="separator"/>'))}else{var o=(function(q){var i=b.toolbarButtons[q]||q;if((typeof(i)).toLowerCase()==="function"){return function(r){i.call(this,r)}}else{return function(){this[i]();this.editor.body.focus()}}})(p.toLowerCase());var l=d.toolbarText[p.toLowerCase()];n.append(f(p.toLowerCase(),l||p,o))}}else{n.append(f(p.css,p.text,p.action))}}}if(d.toolbar.length!==0&&b.isArray(d.toolbar[0])){for(var e=0;e<d.toolbar.length;e++){j(d.toolbar[e])}}else{j(d.toolbar)}},attachEditorEvents:function(){var e=this;var d=function(){e.updateHtmlArea()};this.textarea.click(d).keyup(d).keydown(d).mousedown(d).blur(d);var f=function(){e.updateTextArea()};c(this.editor.body).click(f).keyup(f).keydown(f).mousedown(f).blur(f);c("form").submit(function(){e.toggleHTMLView();e.toggleHTMLView()});if(window.__doPostBack){var g=__doPostBack;window.__doPostBack=function(){if(e){if(e.toggleHTMLView){e.toggleHTMLView();e.toggleHTMLView()}}return g.apply(window,arguments)}}},isArray:function(d){return d&&typeof d==="object"&&typeof d.length==="number"&&typeof d.splice==="function"&&!(d.propertyIsEnumerable("length"))}}})(jQuery);