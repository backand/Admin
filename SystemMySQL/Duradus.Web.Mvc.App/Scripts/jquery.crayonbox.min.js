(function(a){jQuery.fn.crayonbox=function(c){var b=jQuery.extend({colors:new Array("Aqua","Blue","Fuchsia","Gray","Green","Lime","Maroon","Olive","Silver","Tomato","Orange","Yellow","Chartreuse","DeepSkyBlue","Violet"),selected:null,crayonTag:"span",clearButton:true,onSelection:function(){},choozerId:"",onShowClicked:function(){}},c);return this.each(function(){if(a(this).attr("active")=="on"){return}a(this).attr("active","on");if(""!=a(this).val()&&null==b.selected){b.selected=a(this).val()}var d=a(this).wrap('<span class="crayonbox"></span>').parent(".crayonbox");a(d).click(function(i){var h=i.target;if(a(i.target).hasClass("crayon")){a(d).uncolor();a(h).html("&diams;").addClass("coloring");a("input",d).val(a(h).attr("title"))}b.onSelection.call(d)});if(b.choozerId!=""){a("#"+b.choozerId).click(function(h){b.onShowClicked.call(d)})}var g=a("#color_choozer").offset();a(d).css({position:"absolute",top:g.top+20,left:g.left});var f="";for(var e in b.colors){a("<"+b.crayonTag+' class="crayon" title="'+b.colors[e]+'">&nbsp;</'+b.crayonTag+">").appendTo(a(d)).css("background-color",b.colors[e])}if(b.clearButton){a("<"+b.crayonTag+' class="boxlid">X</'+b.crayonTag+">").appendTo(a(d)).click(function(){a(this).parents(".crayonbox").uncolor();a("input",d).val("")})}if(null!=b.selected){a(d).find("[title="+b.selected+"]").trigger("click")}a(d).hide()})};jQuery.fn.uncolor=function(b){if(undefined==b){b=true}return this.each(function(){a(".coloring",this).html("&nbsp;").removeClass("coloring")})}})(jQuery);